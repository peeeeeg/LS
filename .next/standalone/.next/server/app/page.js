(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6142:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d}),r(908),r(1506),r(5866);var a=r(3191),s=r(8716),n=r(7922),i=r.n(n),l=r(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,908)),"C:\\AIRL\\lifestream-智能日历 （CN）\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1506)),"C:\\AIRL\\lifestream-智能日历 （CN）\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\AIRL\\lifestream-智能日历 （CN）\\app\\page.tsx"],m="/page",x={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5734:(e,t,r)=>{Promise.resolve().then(r.bind(r,8763))},2029:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},1949:()=>{},8763:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ee});var a,s,n=r(326),i=r(7577);let l={"2026-01-01":{name:"元旦"},"2026-02-21":{name:"春节"},"2026-02-22":{name:"春节"},"2026-02-23":{name:"春节"},"2026-02-24":{name:"春节"},"2026-02-25":{name:"春节"},"2026-02-26":{name:"春节"},"2026-02-27":{name:"春节"},"2026-04-04":{name:"清明节"},"2026-04-05":{name:"清明节"},"2026-04-06":{name:"清明节"},"2026-05-01":{name:"劳动节"},"2026-05-02":{name:"劳动节"},"2026-05-03":{name:"劳动节"},"2026-05-04":{name:"劳动节"},"2026-05-05":{name:"劳动节"},"2026-06-20":{name:"端午节"},"2026-06-21":{name:"端午节"},"2026-06-22":{name:"端午节"},"2026-09-26":{name:"中秋节"},"2026-09-27":{name:"中秋节"},"2026-09-28":{name:"中秋节"},"2026-10-01":{name:"国庆节"},"2026-10-02":{name:"国庆节"},"2026-10-03":{name:"国庆节"},"2026-10-04":{name:"国庆节"},"2026-10-05":{name:"国庆节"},"2026-10-06":{name:"国庆节"},"2026-10-07":{name:"国庆节"},"2026-02-15":{name:"春节调休",isWorkDay:!0},"2026-02-28":{name:"春节调休",isWorkDay:!0},"2026-04-09":{name:"清明节调休",isWorkDay:!0},"2026-04-30":{name:"劳动节调休",isWorkDay:!0},"2026-06-23":{name:"端午节调休",isWorkDay:!0},"2026-09-29":{name:"中秋节调休",isWorkDay:!0},"2026-10-10":{name:"国庆节调休",isWorkDay:!0}},o=e=>l[e.toISOString().split("T")[0]]||null,d=e=>{let t=o(e);return!!t&&!t.isWorkDay},c=e=>{let t=o(e);return!!t&&!0===t.isWorkDay},m=e=>{if(d(e))return"text-red-600";if(c(e))return"text-gray-400";let t=e.getDay();return 0===t||6===t?"text-red-500":"text-gray-700"},x=e=>e.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Shanghai"}),h=(e,t)=>{let r=new Date(e,t,1),a=[];for(;r.getMonth()===t;)a.push(new Date(r)),r.setDate(r.getDate()+1);return a},p=e=>{let t=new Date(e);t.getDay(),t.getDate();let r=new Date(e);r.setDate(e.getDate()-e.getDay());let a=[];for(let e=0;e<7;e++){let t=new Date(r);t.setDate(r.getDate()+e),a.push(t)}return a},g=(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate();(function(e){e.WORK="WORK",e.PERSONAL="PERSONAL",e.URGENT="URGENT",e.OTHER="OTHER"})(a||(a={})),function(e){e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(s||(s={}));let u=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),b=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),f=e=>{let t=b(e);return t.charAt(0).toUpperCase()+t.slice(1)},y=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),w=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var v={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let j=(0,i.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:n,iconNode:l,...o},d)=>(0,i.createElement)("svg",{ref:d,...v,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:y("lucide",s),...!n&&!w(o)&&{"aria-hidden":"true"},...o},[...l.map(([e,t])=>(0,i.createElement)(e,t)),...Array.isArray(n)?n:[n]])),N=(e,t)=>{let r=(0,i.forwardRef)(({className:r,...a},s)=>(0,i.createElement)(j,{ref:s,iconNode:t,className:y(`lucide-${u(f(e))}`,`lucide-${e}`,r),...a}));return r.displayName=f(e),r},k=N("chevrons-up",[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]]),D=N("chevrons-down",[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]]),C=N("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),M=N("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),S=N("bell-off",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]),E=N("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),$=N("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),R={[a.WORK]:"bg-blue-100 text-blue-800 border-blue-200",[a.PERSONAL]:"bg-green-100 text-green-800 border-green-200",[a.URGENT]:"bg-red-100 text-red-800 border-red-200",[a.OTHER]:"bg-gray-100 text-gray-800 border-gray-200"},A={[a.WORK]:"工作",[a.PERSONAL]:"个人",[a.URGENT]:"紧急",[a.OTHER]:"其他"},P={[a.WORK]:"\uD83D\uDCBC",[a.PERSONAL]:"\uD83D\uDC64",[a.URGENT]:"⚠️",[a.OTHER]:"\uD83D\uDCCC"},L=e=>0===e?"事件开始时":e<60?`提前 ${e} 分钟`:60===e?"提前 1 小时":e%60==0?`提前 ${e/60} 小时`:`提前 ${e} 分钟`,z=({priority:e})=>{switch(e){case s.HIGH:return n.jsx("span",{title:"高优先级",className:"flex items-center",children:n.jsx(k,{className:"w-3.5 h-3.5 text-red-600"})});case s.LOW:return n.jsx("span",{title:"低优先级",className:"flex items-center",children:n.jsx(D,{className:"w-3.5 h-3.5 text-blue-400"})});default:return null}},T=({event:e,onClick:t,onToggleComplete:r,onToggleReminder:s,compact:i,style:l,className:o,timeFormat:d})=>{let c=new Date(e.start),m=new Date(e.end),h=m<new Date;return(0,n.jsxs)("div",{onClick:r=>{r.stopPropagation(),t(e)},style:l,className:`
        cursor-pointer rounded-md border p-2 mb-1 transition-all hover:shadow-md relative group
        ${R[e.type]}
        ${h||e.isCompleted?"opacity-60 grayscale":"opacity-100"}
        ${i?"text-xs py-1 px-1.5 truncate":"text-sm"}
        ${o||""}
      `,children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1.5 min-w-0 flex-1",children:[r&&n.jsx("div",{role:"button",onClick:t=>{t.stopPropagation(),r?.(e.id)},className:"flex-shrink-0 text-current opacity-70 hover:opacity-100 hover:scale-110 transition-all",children:e.isCompleted?n.jsx(C,{className:"w-3.5 h-3.5"}):n.jsx("div",{className:"w-3.5 h-3.5 rounded-full border-[1.5px] border-current"})}),n.jsx(z,{priority:e.priority}),(0,n.jsxs)("span",{className:`font-semibold truncate ${e.isCompleted?"line-through decoration-current":""}`,children:[("start"===d||"range"===d)&&n.jsx("span",{className:"font-normal opacity-80 mr-1",children:x(c)}),n.jsx("span",{className:"font-normal mr-1",children:i?P[e.type]:A[e.type]}),e.title]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[s&&n.jsx("div",{role:"button",onClick:t=>{t.stopPropagation(),s?.(e.id)},className:`transition-opacity ${e.reminderEnabled?"opacity-100":"opacity-30 hover:opacity-100"}`,title:e.reminderEnabled?`提醒: ${L(e.reminderMinutes)}`:"提醒已关闭",children:e.reminderEnabled?n.jsx(M,{className:"w-3 h-3 fill-current"}):n.jsx(S,{className:"w-3 h-3"})}),e.type===a.URGENT&&n.jsx(E,{className:"w-3 h-3 text-red-600"})]})]}),!i&&(0,n.jsxs)("div",{className:"flex items-center gap-1 mt-1 text-xs opacity-80",children:[n.jsx($,{className:"w-3 h-3"}),(0,n.jsxs)("span",{children:[x(c)," - ",x(m)]})]}),e.description&&!i&&n.jsx("p",{className:"mt-1 text-xs truncate opacity-70",children:e.description})]})},O=N("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),I=N("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),W=Array.from({length:24},(e,t)=>t),H=({currentDate:e,viewMode:t,events:r,onMonthChange:a,onViewModeChange:s,onEventClick:l,onToggleComplete:d,onToggleReminder:c})=>{let x=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(("week"===t||"day"===t)&&x.current){let e=new Date().getHours();x.current.scrollTop=Math.max(0,(e-1)*60)}},[t]);let u=(0,i.useMemo)(()=>{let t=h(e.getFullYear(),e.getMonth());return[...Array(t[0].getDay()).fill(null),...t]},[e]),b=e.toLocaleDateString("zh-CN",{month:"long",year:"numeric",timeZone:"Asia/Shanghai"}),f=new Date,y=e=>r.filter(t=>g(new Date(t.start),e)).map(e=>{let t=new Date(e.start),r=new Date(e.end),a=60*t.getHours()+t.getMinutes(),s=(r.getTime()-t.getTime())/6e4;return n.jsx(T,{event:e,onClick:l,onToggleComplete:d,onToggleReminder:c,compact:!0,timeFormat:"range",style:{top:`${1*a}px`,height:`${Math.max(1*s,24)}px`,position:"absolute"},className:"left-1 right-1 z-10 shadow-sm text-xs overflow-hidden absolute"},e.id)});return(0,n.jsxs)("div",{className:"flex flex-col h-full bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between p-3 md:p-4 border-b border-gray-200 bg-white flex-none z-10 gap-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between md:justify-start gap-2 md:gap-4",children:[n.jsx("h2",{className:"text-lg md:text-2xl font-bold text-gray-800 truncate",children:"day"===t?"日程详情":b}),(0,n.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1 gap-1 flex-shrink-0",children:[n.jsx("button",{onClick:()=>s("month"),className:`px-2 md:px-3 py-1 text-xs md:text-sm rounded-md transition-all ${"month"===t?"bg-white text-indigo-600 shadow-sm font-medium":"text-gray-500 hover:text-gray-700"}`,children:"月"}),n.jsx("button",{onClick:()=>s("week"),className:`px-2 md:px-3 py-1 text-xs md:text-sm rounded-md transition-all ${"week"===t?"bg-white text-indigo-600 shadow-sm font-medium":"text-gray-500 hover:text-gray-700"}`,children:"周"}),n.jsx("button",{onClick:()=>s("day"),className:`px-2 md:px-3 py-1 text-xs md:text-sm rounded-md transition-all ${"day"===t?"bg-white text-indigo-600 shadow-sm font-medium":"text-gray-500 hover:text-gray-700"}`,children:"日"})]})]}),n.jsx("div",{className:"flex justify-between md:justify-end gap-2",children:(0,n.jsxs)("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:()=>{let r=new Date(e);"month"===t?r.setMonth(r.getMonth()-1):"week"===t?r.setDate(r.getDate()-7):r.setDate(r.getDate()-1),a(r)},className:"p-1.5 md:p-2 hover:bg-gray-100 rounded-full transition-colors border border-gray-200",children:n.jsx(O,{className:"w-4 h-4 md:w-5 md:h-5 text-gray-600"})}),n.jsx("button",{onClick:()=>a(new Date),className:"px-3 py-1 text-xs md:text-sm font-medium text-indigo-600 bg-indigo-50 hover:bg-indigo-100 rounded-md transition-colors border border-indigo-100",children:"今天"}),n.jsx("button",{onClick:()=>{let r=new Date(e);"month"===t?r.setMonth(r.getMonth()+1):"week"===t?r.setDate(r.getDate()+7):r.setDate(r.getDate()+1),a(r)},className:"p-1.5 md:p-2 hover:bg-gray-100 rounded-full transition-colors border border-gray-200",children:n.jsx(I,{className:"w-4 h-4 md:w-5 md:h-5 text-gray-600"})})]})})]}),"month"===t&&(0,n.jsxs)("div",{className:"flex flex-col flex-1 h-full overflow-hidden",children:[n.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200 bg-gray-50 flex-none",children:["周日","周一","周二","周三","周四","周五","周六"].map(e=>n.jsx("div",{className:"py-2 md:py-3 text-center text-xs md:text-sm font-semibold text-gray-500 uppercase tracking-wider",children:e},e))}),n.jsx("div",{className:"grid grid-cols-7 flex-1 auto-rows-fr overflow-y-auto bg-white",children:u.map((e,t)=>{if(!e)return n.jsx("div",{className:"bg-gray-50/30 border-b border-r border-gray-100 min-h-[80px]"},`empty-${t}`);let i=r.filter(t=>g(new Date(t.start),e)),x=g(e,f);return(0,n.jsxs)("div",{className:"min-h-[80px] p-1 md:p-2 border-b border-r border-gray-100 hover:bg-gray-50 flex flex-col gap-1 overflow-hidden relative transition-colors cursor-pointer landscape:min-h-[60px] landscape:p-0.5 landscape:gap-0",onDoubleClick:()=>{a(e),s("day")},children:[(0,n.jsxs)("div",{className:"flex flex-col items-center gap-1 landscape:gap-0.5",children:[n.jsx("div",{className:`text-xs md:text-sm font-medium w-6 h-6 md:w-7 md:h-7 flex items-center justify-center rounded-full ${x?"bg-indigo-600 text-white":m(e)} landscape:w-5 landscape:h-5 landscape:text-[10px]`,children:e.getDate()}),o(e)&&n.jsx("div",{className:"text-[10px] md:text-xs truncate text-red-600 font-medium landscape:text-[8px] landscape:whitespace-nowrap",children:o(e)?.name})]}),n.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-1 landscape:space-y-0.5",children:i.map(e=>n.jsx(T,{event:e,onClick:l,onToggleComplete:d,onToggleReminder:c,compact:!0,timeFormat:"start",className:"landscape:p-1 landscape:text-[9px]"},e.id))})]},e.toISOString())})})]}),"week"===t&&(()=>{let t=p(e);return n.jsx("div",{className:"flex-1 overflow-auto bg-white relative",ref:x,children:(0,n.jsxs)("div",{className:"min-w-[600px] md:min-w-0 max-w-full",children:[" ",(0,n.jsxs)("div",{className:"grid grid-cols-8 relative",children:[n.jsx("div",{className:"sticky left-0 top-0 z-40 bg-gray-50 border-r border-b border-gray-200 h-[60px]"}),t.map(e=>{let t=g(e,f),r=o(e);return(0,n.jsxs)("div",{className:"sticky top-0 z-30 bg-gray-50 border-b border-r border-gray-100 py-2 md:py-3 text-center h-[60px] flex flex-col items-center justify-center landscape:h-[40px] landscape:py-0.5 landscape:px-0",children:[n.jsx("span",{className:`text-xs uppercase font-semibold ${t?"text-indigo-600":m(e)} landscape:text-[8px]`,children:e.toLocaleDateString("zh-CN",{weekday:"short",timeZone:"Asia/Shanghai"})}),n.jsx("span",{className:`mt-1 w-6 h-6 md:w-8 md:h-8 flex items-center justify-center rounded-full text-sm md:text-lg font-medium ${t?"bg-indigo-600 text-white":m(e)} landscape:w-5 landscape:h-5 landscape:text-[10px] landscape:mt-0.5`,children:e.getDate()}),r&&n.jsx("span",{className:"text-[9px] md:text-xs truncate text-red-600 font-medium mt-0.5 landscape:text-[7px] landscape:mt-0.5",children:r.name})]},`header-${e}`)}),n.jsx("div",{className:"sticky left-0 z-20 bg-white border-r border-gray-200 landscape:w-12",children:W.map(e=>n.jsx("div",{style:{height:60},className:"text-xs text-gray-400 text-right pr-2 pt-1 border-b border-transparent relative landscape:text-[10px] landscape:pr-1 landscape:pt-0",children:(0,n.jsxs)("span",{className:"-top-3 relative landscape:-top-2",children:[e,":00"]})},`time-${e}`))}),t.map(e=>(0,n.jsxs)("div",{className:"border-r border-gray-100 relative bg-white cursor-pointer",onDoubleClick:()=>{a(e),s("day")},children:[g(e,f)&&n.jsx("div",{className:"absolute w-full border-t-2 border-red-500 z-20 pointer-events-none flex items-center",style:{top:`${(60*f.getHours()+f.getMinutes())*1}px`},children:n.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full -ml-1"})}),W.map(t=>n.jsx("div",{style:{height:60},className:"border-b border-gray-100"},`cell-${e}-${t}`)),y(e)]},`col-${e}`))]})]})})})(),"day"===t&&n.jsx("div",{className:"flex-1 overflow-auto bg-white relative",ref:x,children:(0,n.jsxs)("div",{className:"flex min-h-[800px]",children:[" ",n.jsx("div",{className:"w-16 md:w-20 flex-none border-r border-gray-200 bg-white sticky left-0 z-20 landscape:w-12",children:W.map(e=>n.jsx("div",{style:{height:60},className:"text-xs text-gray-400 text-right pr-2 md:pr-4 pt-1 border-b border-transparent relative landscape:text-[10px] landscape:pr-1 landscape:pt-0",children:(0,n.jsxs)("span",{className:"-top-3 relative landscape:-top-2",children:[e,":00"]})},e))}),(0,n.jsxs)("div",{className:"flex-1 relative bg-white",children:[n.jsx("div",{className:"sticky top-0 z-30 bg-gray-50 border-b border-gray-200 p-2 text-center landscape:p-1",children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-1 landscape:gap-0.5",children:[n.jsx("span",{className:`text-base md:text-lg font-semibold ${g(e,f)?"text-indigo-600":m(e)} landscape:text-sm`,children:e.toLocaleDateString("zh-CN",{weekday:"long",year:"numeric",month:"long",day:"numeric",timeZone:"Asia/Shanghai"})}),o(e)&&n.jsx("span",{className:"text-xs truncate text-red-600 font-medium landscape:text-[9px]",children:o(e)?.name})]})}),g(e,f)&&(0,n.jsxs)("div",{className:"absolute w-full border-t-2 border-red-500 z-20 pointer-events-none flex items-center",style:{top:`${(60*f.getHours()+f.getMinutes())*1}px`},children:[n.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full -ml-1"}),n.jsx("span",{className:"text-xs text-red-500 bg-white px-1 ml-1 font-medium",children:f.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Shanghai"})})]}),W.map(e=>n.jsx("div",{style:{height:60},className:"border-b border-gray-100"},e)),y(e)]})]})})]})},_=N("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),G=N("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),U=N("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),q=N("circle-stop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]),Z=N("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]),F=N("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),K=({isProcessing:e,onSendMessage:t,messages:r,onClose:a})=>{let[s,l]=(0,i.useState)(""),[o,d]=(0,i.useState)(!1),c=(0,i.useRef)(null),m=(0,i.useRef)(null);(0,i.useEffect)(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){let e=window.SpeechRecognition||window.webkitSpeechRecognition;c.current=new e,c.current.continuous=!1,c.current.interimResults=!1,c.current.lang="zh-CN",c.current.onresult=e=>{let t=e.results[0][0].transcript;l(t),x(t)},c.current.onend=()=>{d(!1)},c.current.onerror=e=>{console.error("Speech recognition error",e.error),d(!1)}}},[]),(0,i.useEffect)(()=>{m.current?.scrollIntoView({behavior:"smooth"})},[r]);let x=e=>{e.trim()&&(t(e),l(""))};return(0,n.jsxs)("div",{className:"flex flex-col h-full bg-white md:border-l border-gray-200 shadow-xl w-full",children:[(0,n.jsxs)("div",{className:"p-4 bg-indigo-600 text-white flex items-center justify-between shadow-sm flex-none",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[n.jsx(_,{className:"w-6 h-6"}),n.jsx("h2",{className:"font-semibold text-lg",children:"AI 助手"})]}),a&&n.jsx("button",{onClick:a,className:"md:hidden text-white/80 hover:text-white p-1",children:n.jsx(G,{className:"w-6 h-6"})})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[0===r.length&&(0,n.jsxs)("div",{className:"text-center text-gray-400 mt-10",children:[n.jsx("p",{className:"mb-2",children:"\uD83D\uDC4B 你好! 我是你的智能日程助手。"}),(0,n.jsxs)("p",{className:"text-sm",children:["试着说: ",n.jsx("br",{}),'"明天下午两点和团队开会"']})]}),r.map(e=>n.jsx("div",{className:`flex ${"user"===e.role?"justify-end":"justify-start"}`,children:n.jsx("div",{className:`max-w-[85%] p-3 rounded-2xl text-sm ${"user"===e.role?"bg-indigo-600 text-white rounded-br-none":"bg-white text-gray-800 border border-gray-200 rounded-bl-none shadow-sm"}`,children:e.content})},e.id)),e&&n.jsx("div",{className:"flex justify-start",children:(0,n.jsxs)("div",{className:"bg-white p-3 rounded-2xl rounded-bl-none border border-gray-200 shadow-sm flex items-center gap-2",children:[n.jsx(U,{className:"w-4 h-4 animate-spin text-indigo-600"}),n.jsx("span",{className:"text-sm text-gray-500",children:"思考中..."})]})}),n.jsx("div",{ref:m})]}),n.jsx("div",{className:"p-4 bg-white border-t border-gray-200 flex-none pb-safe",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>{o?c.current?.stop():(d(!0),c.current?.start())},className:`p-3 rounded-full transition-colors flex-shrink-0 ${o?"bg-red-100 text-red-600 animate-pulse":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:"语音输入 (中文)",children:o?n.jsx(q,{className:"w-5 h-5"}):n.jsx(Z,{className:"w-5 h-5"})}),n.jsx("div",{className:"flex-1 relative",children:n.jsx("input",{type:"text",value:s,onChange:e=>l(e.target.value),onKeyDown:e=>"Enter"===e.key&&x(s),placeholder:"输入...",className:"w-full pl-4 pr-10 py-3 bg-gray-100 border-none rounded-full text-sm focus:ring-2 focus:ring-indigo-500 outline-none",disabled:e||o})}),n.jsx("button",{onClick:()=>x(s),disabled:!s.trim()||e,className:"p-3 bg-indigo-600 text-white rounded-full hover:bg-indigo-700 disabled:opacity-50 transition-colors flex-shrink-0",children:n.jsx(F,{className:"w-5 h-5"})})]})})]})},B=e=>{},V=()=>{try{return[]}catch(e){return console.error("Failed to load events",e),[]}},Y=async(e,t,r)=>{try{let a=await fetch("/api/ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:e,currentEvents:t,viewDate:new Date(r.toLocaleString("en-US",{timeZone:"Asia/Shanghai"})).toISOString()})});if(!a.ok)throw Error("Failed to fetch AI response");return await a.json()}catch(e){throw console.error("Error processing request:",e),e}},J=N("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),X=N("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Q=()=>{let[e,t]=(0,i.useState)([]),[r,a]=(0,i.useState)(new Date),[l,o]=(0,i.useState)("month"),[d,c]=(0,i.useState)([]),[m,x]=(0,i.useState)(!1),[h,p]=(0,i.useState)(null),[g,u]=(0,i.useState)(!1);(0,i.useEffect)(()=>{t(V().map(e=>({...e,reminderEnabled:void 0===e.reminderEnabled||e.reminderEnabled,reminderMinutes:void 0!==e.reminderMinutes?e.reminderMinutes:15,priority:void 0!==e.priority?e.priority:s.MEDIUM}))),"Notification"in window&&"granted"!==Notification.permission&&Notification.requestPermission()},[]),(0,i.useEffect)(()=>{B(e)},[e]),(0,i.useEffect)(()=>{let e=setInterval(()=>{let e=new Date;t(t=>t.map(t=>{if(!t.reminderEnabled||t.notified)return t;let r=new Date(t.start).getTime(),a=6e4*t.reminderMinutes,s=r-e.getTime();return s>0&&s<=a?("granted"===Notification.permission&&new Notification(`日程提醒: ${t.title}`,{body:`将在 ${Math.round(s/6e4)} 分钟后开始。`,icon:"/favicon.ico"}),{...t,notified:!0}):t}))},1e4);return()=>clearInterval(e)},[]);let b=async a=>{let s={id:Date.now().toString(),role:"user",content:a,timestamp:Date.now()};c(e=>[...e,s]),x(!0);try{let{events:s,message:n}=await Y(a,e,r),i=s.map(e=>({...e,id:crypto.randomUUID(),isCompleted:!1,notified:!1,reminderEnabled:!0,reminderMinutes:15}));i.length>0&&t(e=>[...e,...i]);let l={id:(Date.now()+1).toString(),role:"assistant",content:n,timestamp:Date.now()};c(e=>[...e,l])}catch(t){console.error(t);let e={id:(Date.now()+1).toString(),role:"assistant",content:"处理请求时出错，请检查网络或 API 配置。",timestamp:Date.now()};c(t=>[...t,e])}finally{x(!1)}},f=e=>{t(t=>t.filter(t=>t.id!==e)),p(null)},y=e=>{t(t=>t.map(t=>t.id===e?{...t,isCompleted:!t.isCompleted}:t)),h&&h.id===e&&p(e=>e?{...e,isCompleted:!e.isCompleted}:null)},w=e=>{t(t=>t.map(t=>t.id===e?{...t,reminderEnabled:!t.reminderEnabled}:t)),h&&h.id===e&&p(e=>e?{...e,reminderEnabled:!e.reminderEnabled}:null)},v=(e,r)=>{t(t=>t.map(t=>t.id===e?{...t,reminderMinutes:r,reminderEnabled:!0,notified:!1}:t)),h&&h.id===e&&p(e=>e?{...e,reminderMinutes:r,reminderEnabled:!0,notified:!1}:null)};return(0,n.jsxs)("div",{className:"relative h-screen w-full bg-gray-100 flex overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative z-0",children:[n.jsx("header",{className:"px-4 py-3 md:p-4 bg-white border-b border-gray-200 flex justify-between items-center shadow-sm flex-none z-10",children:n.jsx("div",{children:(0,n.jsxs)("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 flex items-center gap-2",children:[n.jsx("span",{className:"bg-indigo-600 text-white px-2 py-0.5 rounded-lg text-lg",children:"LS"}),"LifeStream"]})})}),n.jsx("div",{className:"flex-1 overflow-hidden p-2 md:p-4",children:n.jsx(H,{currentDate:r,viewMode:l,onViewModeChange:o,events:e,onMonthChange:a,onEventClick:p,onToggleComplete:y,onToggleReminder:w})}),n.jsx("button",{onClick:()=>u(!0),className:"md:hidden absolute bottom-6 right-6 w-14 h-14 bg-indigo-600 text-white rounded-full shadow-xl flex items-center justify-center hover:bg-indigo-700 transition-transform active:scale-95 z-30","aria-label":"Open AI Assistant",children:n.jsx(J,{className:"w-7 h-7"})})]}),n.jsx("div",{className:`
        fixed inset-0 z-40 bg-black/20 backdrop-blur-sm md:static md:bg-transparent md:backdrop-blur-none md:z-auto md:w-96 md:flex-none
        transition-all duration-300
        ${g?"opacity-100 visible":"opacity-0 invisible md:opacity-100 md:visible"}
      `,onClick:()=>u(!1),children:n.jsx("div",{className:`
            absolute bottom-0 left-0 right-0 h-[80vh] md:h-full md:relative bg-white shadow-2xl rounded-t-2xl md:rounded-none flex flex-col
            transform transition-transform duration-300 ease-out
            ${g?"translate-y-0":"translate-y-full md:translate-y-0"}
          `,onClick:e=>e.stopPropagation(),children:n.jsx(K,{isProcessing:m,onSendMessage:b,messages:d,onClose:()=>u(!1)})})}),h&&n.jsx("div",{className:"absolute inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in duration-200",children:(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 relative animate-in zoom-in-95 duration-200",children:[n.jsx("button",{onClick:()=>p(null),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 p-2",children:n.jsx(G,{className:"w-6 h-6"})}),(0,n.jsxs)("div",{className:"flex items-start gap-3 mb-2 pr-8",children:[n.jsx("button",{onClick:()=>y(h.id),className:`p-1 mt-1 rounded-full transition-colors flex-shrink-0 ${h.isCompleted?"text-indigo-600 bg-indigo-50":"text-gray-300 hover:text-gray-500"}`,children:n.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${h.isCompleted?"border-indigo-600":"border-current"}`,children:h.isCompleted&&n.jsx("div",{className:"w-3 h-3 bg-indigo-600 rounded-full"})})}),(0,n.jsxs)("div",{children:[n.jsx("h2",{className:`text-xl font-bold leading-tight ${h.isCompleted?"line-through text-gray-400":"text-gray-900"}`,children:h.title}),(0,n.jsxs)("div",{className:"flex gap-2 mt-2 flex-wrap",children:[n.jsx("span",{className:"inline-block px-2 py-0.5 bg-gray-100 rounded text-xs text-gray-600 font-medium",children:h.type}),(0,n.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${h.priority===s.HIGH?"bg-red-100 text-red-700":h.priority===s.LOW?"bg-blue-50 text-blue-600":"bg-gray-100 text-gray-600"}`,children:[h.priority===s.HIGH&&n.jsx(k,{className:"w-3 h-3"}),h.priority===s.LOW&&n.jsx(D,{className:"w-3 h-3"}),h.priority===s.MEDIUM&&n.jsx(X,{className:"w-3 h-3"}),h.priority===s.HIGH?"高":h.priority===s.LOW?"低":"中"]})]})]})]}),(0,n.jsxs)("div",{className:"space-y-4 mt-6",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1 p-3 bg-gray-50 rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500 uppercase font-semibold",children:[n.jsx($,{className:"w-3 h-3"}),n.jsx("span",{children:"时间"})]}),(0,n.jsxs)("div",{className:"text-gray-800 text-sm",children:[new Date(h.start).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Shanghai"}),n.jsx("span",{className:"mx-2 text-gray-400",children:"至"}),new Date(h.end).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Shanghai"})]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 p-3 bg-gray-50 rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[n.jsx(M,{className:`w-4 h-4 ${h.reminderEnabled?"text-indigo-600":"text-gray-400"}`}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"提醒"})]}),n.jsx("button",{onClick:()=>w(h.id),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 ${h.reminderEnabled?"bg-indigo-600":"bg-gray-200"}`,children:n.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${h.reminderEnabled?"translate-x-6":"translate-x-1"}`})})]}),h.reminderEnabled&&n.jsx("div",{className:"mt-2 pl-6",children:n.jsx("select",{value:h.reminderMinutes,onChange:e=>v(h.id,Number(e.target.value)),className:"w-full bg-white border border-gray-200 text-gray-700 text-sm rounded-md p-2 focus:ring-2 focus:ring-indigo-500 outline-none",children:[{value:0,label:"事件开始时"},{value:5,label:"提前 5 分钟"},{value:15,label:"提前 15 分钟"},{value:30,label:"提前 30 分钟"},{value:60,label:"提前 1 小时"},{value:120,label:"提前 2 小时"},{value:1440,label:"提前 1 天"}].map(e=>n.jsx("option",{value:e.value,children:e.label},e.value))})})]}),h.description&&(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-xs text-gray-500 uppercase font-semibold",children:"详情"}),n.jsx("p",{className:"text-gray-700 text-sm leading-relaxed bg-white border border-gray-100 p-3 rounded-lg max-h-32 overflow-y-auto",children:h.description})]}),(0,n.jsxs)("div",{className:"pt-4 flex justify-end gap-3 border-t border-gray-100 mt-2",children:[n.jsx("button",{onClick:()=>f(h.id),className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors text-sm font-medium",children:"删除"}),n.jsx("button",{onClick:()=>p(null),className:"px-4 py-2 bg-indigo-600 text-white hover:bg-indigo-700 rounded-lg transition-colors text-sm font-medium",children:"关闭"})]})]})]})})]})};function ee(){return n.jsx(Q,{})}},1506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>s});var a=r(9510);r(7272);let s={title:"LifeStream Smart Calendar",description:"AI-powered smart calendar application",themeColor:"#3b82f6",appleWebApp:{capable:!0,statusBarStyle:"black-translucent",title:"LifeStream",startupImage:"/icon-512x512.png"},icons:{icon:"/icon-192x192.png",apple:"/icon-180x180.png"},manifest:"/manifest.json"};function n({children:e}){return(0,a.jsxs)("html",{lang:"zh-CN",children:[a.jsx("head",{children:a.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"})}),(0,a.jsxs)("body",{children:[a.jsx("script",{dangerouslySetInnerHTML:{__html:`
              if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                  navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                      console.log('Service Worker registered with scope:', registration.scope);
                    })
                    .catch(error => {
                      console.error('Service Worker registration failed:', error);
                    });
                });
              }
            `}}),e]})]})}},908:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(8570).createProxy)(String.raw`C:\AIRL\lifestream-智能日历 （CN）\app\page.tsx#default`)},7272:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,471],()=>r(6142));module.exports=a})();